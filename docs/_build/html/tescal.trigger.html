

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>tescal.trigger package &mdash; tescal 0.2.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="tescal.utils package" href="tescal.utils.html" />
    <link rel="prev" title="tescal.plotting package" href="tescal.plotting.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> tescal
          

          
          </a>

          
            
            
              <div class="version">
                0.2.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="tescal.html">tescal package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="tescal.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="tescal.detcal.html">tescal.detcal package</a></li>
<li class="toctree-l3"><a class="reference internal" href="tescal.fitting.html">tescal.fitting package</a></li>
<li class="toctree-l3"><a class="reference internal" href="tescal.io.html">tescal.io package</a></li>
<li class="toctree-l3"><a class="reference internal" href="tescal.plotting.html">tescal.plotting package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">tescal.trigger package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-tescal.trigger.cont_trigger">tescal.trigger.cont_trigger module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-tescal.trigger">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="tescal.utils.html">tescal.utils package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tescal.html#module-tescal">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tescal.detcal.html">tescal.detcal package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tescal.fitting.html">tescal.fitting package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tescal.plotting.html">tescal.plotting package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tescal.utils.html">tescal.utils package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">tescal.trigger package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-tescal.trigger.cont_trigger">tescal.trigger.cont_trigger module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-tescal.trigger">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tescal.io.html">tescal.io package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">tescal</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="tescal.html">tescal package</a> &raquo;</li>
        
      <li>tescal.trigger package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tescal.trigger.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tescal-trigger-package">
<h1>tescal.trigger package<a class="headerlink" href="#tescal-trigger-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-tescal.trigger.cont_trigger">
<span id="tescal-trigger-cont-trigger-module"></span><h2>tescal.trigger.cont_trigger module<a class="headerlink" href="#module-tescal.trigger.cont_trigger" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="tescal.trigger.cont_trigger.OptimumFilt">
<em class="property">class </em><code class="descclassname">tescal.trigger.cont_trigger.</code><code class="descname">OptimumFilt</code><span class="sig-paren">(</span><em>fs</em>, <em>template</em>, <em>noisepsd</em>, <em>tracelength</em>, <em>trigtemplate=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tescal.trigger.cont_trigger.OptimumFilt" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class for applying a time-domain optimum filter to a long trace, which can be thought of as an FIR filter.</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="0%" />
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>phi</strong></td>
<td>(ndarray) The optimum filter in time-domain, equal to the inverse FT of (FT of the template/power spectral density of noise) norm : float The normalization of the optimal amplitude. tracelength : int The desired trace length (in bins) to be saved when triggering on events. fs : float The sample rate of the data (Hz). pulse_range : int If detected events are this far away from one another (in bins), then they are to be treated as the same event. traces : ndarray All of the traces to be filtered, assumed to be an ndarray of shape = (# of traces, # of channels, # of trace bins). Should be in units of Amps. template : ndarray The template that will be used for the Optimum Filter. noisepsd : ndarray The two-sided noise PSD that will be used to create the Optimum Filter. filts : ndarray The result of the FIR filter on each of the traces. resolution : float The expected energy resolution in Amps given by the template and the noisepsd, calculated from the Optimum Filter. times : ndarray The absolute start time of each trace (in s), should be a 1-dimensional ndarray. pulsetimes : ndarray If we triggered on a pulse, the time of the pulse trigger in seconds. Otherwise this is zero. pulseamps : If we triggered on a pulse, the optimum amplitude at the pulse trigger time. Otherwise this is zero. trigtimes : ndarray If we triggered due to ttl, the time of the ttl trigger in seconds. Otherwise this is zero. pulseamps : If we triggered due to ttl, the optimum amplitude at the ttl trigger time. Otherwise this is zero. traces : ndarray The corresponding trace for each detected event. trigtypes: ndarray Array of boolean vectors each of length 3. The first value indicates if the trace is a random or not. The second value indicates if we had a pulse trigger. The third value indicates if we had a ttl trigger.</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<dl class="method">
<dt id="tescal.trigger.cont_trigger.OptimumFilt.eventtrigger">
<code class="descname">eventtrigger</code><span class="sig-paren">(</span><em>thresh</em>, <em>trigthresh=None</em>, <em>positivepulses=True</em><span class="sig-paren">)</span><a class="headerlink" href="#tescal.trigger.cont_trigger.OptimumFilt.eventtrigger" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to detect events in the traces with an optimum amplitude greater than the specified threshold.
Note that this may return duplicate events, so care should be taken in post-processing to get rid of 
such events.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>thresh</strong> : float</p>
<blockquote class="last">
<div><blockquote>
<div><p>The number of standard deviations of the energy resolution to use as the threshold for which events
will be detected as a pulse.</p>
</div></blockquote>
<dl class="docutils">
<dt>trigthresh <span class="classifier-delimiter">:</span> <span class="classifier">NoneType, float, optional</span></dt>
<dd><p class="first last">The threshold value (in units of the trigger channel) such that any amplitudes higher than this will be 
detected as ttl trigger event. If left as None, then only the pulses are analyzed.</p>
</dd>
<dt>positivepulses <span class="classifier-delimiter">:</span> <span class="classifier">boolean, optional</span></dt>
<dd><p class="first last">Boolean flag for which direction the pulses go in the traces. If they go in the positive direction, 
then this should be set to True. If they go in the negative direction, then this should be set to False.
Default is True.</p>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="tescal.trigger.cont_trigger.OptimumFilt.filtertraces">
<code class="descname">filtertraces</code><span class="sig-paren">(</span><em>traces</em>, <em>times</em>, <em>trig=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tescal.trigger.cont_trigger.OptimumFilt.filtertraces" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to apply the FIR filter the inputted traces with specified times.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>traces</strong> : ndarray</p>
<blockquote class="last">
<div><blockquote>
<div><p>All of the traces to be filtered, assumed to be an ndarray of 
shape = (# of traces, # of channels, # of trace bins). Should be in units of Amps.</p>
</div></blockquote>
<dl class="docutils">
<dt>times <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">The absolute start time of each trace (in s), should be a 1-dimensional ndarray.</p>
</dd>
<dt>trig <span class="classifier-delimiter">:</span> <span class="classifier">NoneType, ndarray, optional</span></dt>
<dd><p class="first last">The trigger channel traces to be filtered using the trigtemplate (if it exists). If
left as None, then only the traces are analyzed. If the trigtemplate attribute
has not been set, but this was set, then an error is raised.</p>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="tescal.trigger.cont_trigger.choice">
<code class="descclassname">tescal.trigger.cont_trigger.</code><code class="descname">choice</code><span class="sig-paren">(</span><em>a</em>, <em>size=None</em>, <em>replace=True</em>, <em>p=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tescal.trigger.cont_trigger.choice" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a random sample from a given 1-D array</p>
<blockquote>
<div><div class="versionadded">
<p><span class="versionmodified">New in version 1.7.0.</span></p>
</div>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>a</strong> : 1-D array-like or int</p>
<blockquote>
<div><p>If an ndarray, a random sample is generated from its elements.
If an int, the random sample is generated as if a were np.arange(a)</p>
</div></blockquote>
<p><strong>size</strong> : int or tuple of ints, optional</p>
<blockquote>
<div><p>Output shape.  If the given shape is, e.g., <code class="docutils literal"><span class="pre">(m,</span> <span class="pre">n,</span> <span class="pre">k)</span></code>, then
<code class="docutils literal"><span class="pre">m</span> <span class="pre">*</span> <span class="pre">n</span> <span class="pre">*</span> <span class="pre">k</span></code> samples are drawn.  Default is None, in which case a
single value is returned.</p>
</div></blockquote>
<p><strong>replace</strong> : boolean, optional</p>
<blockquote>
<div><p>Whether the sample is with or without replacement</p>
</div></blockquote>
<p><strong>p</strong> : 1-D array-like, optional</p>
<blockquote>
<div><p>The probabilities associated with each entry in a.
If not given the sample assumes a uniform distribution over all
entries in a.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>samples</strong> : single item or ndarray</p>
<blockquote>
<div><p>The generated random samples</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>ValueError</strong></p>
<blockquote class="last">
<div><p>If a is an int and less than zero, if a or p are not 1-dimensional,
if a is an array-like of size 0, if p is not a vector of
probabilities, if a and p have different lengths, or if
replace=False and the sample size is greater than the population
size</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">randint</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">shuffle</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">permutation</span></code></p>
</div>
<p class="rubric">Examples</p>
<p>Generate a uniform random sample from np.arange(5) of size 3:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">array([0, 3, 4])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#This is equivalent to np.random.randint(0,5,3)</span>
</pre></div>
</div>
<p>Generate a non-uniform random sample from np.arange(5) of size 3:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">array([3, 3, 0])</span>
</pre></div>
</div>
<p>Generate a uniform random sample from np.arange(5) of size 3 without
replacement:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">array([3,1,0])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#This is equivalent to np.random.permutation(np.arange(5))[:3]</span>
</pre></div>
</div>
<p>Generate a non-uniform random sample from np.arange(5) of size
3 without replacement:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">array([2, 3, 0])</span>
</pre></div>
</div>
<p>Any of the above can be repeated with an arbitrary array-like
instead of just integers. For instance:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aa_milne_arr</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pooh&#39;</span><span class="p">,</span> <span class="s1">&#39;rabbit&#39;</span><span class="p">,</span> <span class="s1">&#39;piglet&#39;</span><span class="p">,</span> <span class="s1">&#39;Christopher&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">aa_milne_arr</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="go">array([&#39;pooh&#39;, &#39;pooh&#39;, &#39;pooh&#39;, &#39;Christopher&#39;, &#39;piglet&#39;],</span>
<span class="go">      dtype=&#39;|S11&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="tescal.trigger.cont_trigger.getchangeslessthanthresh">
<code class="descclassname">tescal.trigger.cont_trigger.</code><code class="descname">getchangeslessthanthresh</code><span class="sig-paren">(</span><em>x</em>, <em>threshold</em><span class="sig-paren">)</span><a class="headerlink" href="#tescal.trigger.cont_trigger.getchangeslessthanthresh" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function that returns a list of the start and ending indices of the ranges of inputted 
values that change by less than the specified threshold value</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x</strong> : ndarray</p>
<blockquote>
<div><blockquote>
<div><p>1-dimensional of values.</p>
</div></blockquote>
<dl class="docutils">
<dt>threshold <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Value to detect the different ranges of vals that change by less than this threshold value.</p>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>ranges</strong> : ndarray</p>
<blockquote class="last">
<div><blockquote>
<div><p>List of tuples that each store the start and ending index of each range.
For example, vals[ranges[0][0]:ranges[0][1]] gives the first section of values that change by less than 
the specified threshold.</p>
</div></blockquote>
<dl class="docutils">
<dt>vals <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">The corresponding starting and ending values for each range in x.</p>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tescal.trigger.cont_trigger.optimumfilt_wrapper">
<code class="descclassname">tescal.trigger.cont_trigger.</code><code class="descname">optimumfilt_wrapper</code><span class="sig-paren">(</span><em>filelist</em>, <em>template</em>, <em>noisepsd</em>, <em>tracelength</em>, <em>thresh</em>, <em>trigtemplate=None</em>, <em>trigthresh=None</em>, <em>positivepulses=True</em>, <em>iotype='stanford'</em><span class="sig-paren">)</span><a class="headerlink" href="#tescal.trigger.cont_trigger.optimumfilt_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper function for the OptimumFilt class for running the continuous trigger on many different files. This allows 
the user to input a list of files that should be analyzed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>filelist</strong> : list of strings</p>
<blockquote>
<div><blockquote>
<div><p>List of files to be opened to take random sections from (should be full paths)</p>
</div></blockquote>
<dl class="docutils">
<dt>template <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">The pulse template to be used when creating the optimum filter (assumed to be normalized)</p>
</dd>
<dt>noisepsd <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">The two-sided power spectral density in units of A^2/Hz</p>
</dd>
<dt>tracelength <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">The desired trace length (in bins) to be saved when triggering on events.</p>
</dd>
<dt>thresh <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The number of standard deviations of the energy resolution to use as the threshold for which events
will be detected as a pulse.</p>
</dd>
<dt>trigtemplate <span class="classifier-delimiter">:</span> <span class="classifier">NoneType, ndarray, optional</span></dt>
<dd><p class="first last">The template for the trigger channel pulse. If left as None, then the trigger channel will not
be analyzed.</p>
</dd>
<dt>trigthresh <span class="classifier-delimiter">:</span> <span class="classifier">NoneType, float, optional</span></dt>
<dd><p class="first last">The threshold value (in units of the trigger channel) such that any amplitudes higher than this will be 
detected as ttl trigger event. If left as None, then only the pulses are analyzed.</p>
</dd>
<dt>positivepulses <span class="classifier-delimiter">:</span> <span class="classifier">boolean, optional</span></dt>
<dd><p class="first last">Boolean flag for which direction the pulses go in the traces. If they go in the positive direction, 
then this should be set to True. If they go in the negative direction, then this should be set to False.
Default is True.</p>
</dd>
<dt>iotype <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Type of file to open, uses a different IO function. Default is “stanford”.</dt>
<dd><p class="first last">“stanford” : Use pycdms.io.loadstanfordfile to open the files</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>pulsetimes</strong> : ndarray</p>
<blockquote class="last">
<div><blockquote>
<div><p>If we triggered on a pulse, the time of the pulse trigger in seconds. Otherwise this is zero.</p>
</div></blockquote>
<dl class="docutils">
<dt>pulseamps <span class="classifier-delimiter">:</span> <span class="classifier"></span></dt>
<dd><p class="first last">If we triggered on a pulse, the optimum amplitude at the pulse trigger time. Otherwise this is zero.</p>
</dd>
<dt>trigtimes <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">If we triggered due to ttl, the time of the ttl trigger in seconds. Otherwise this is zero.</p>
</dd>
<dt>trigamps <span class="classifier-delimiter">:</span> <span class="classifier"></span></dt>
<dd><p class="first last">If we triggered due to ttl, the optimum amplitude at the ttl trigger time. Otherwise this is zero.</p>
</dd>
<dt>traces <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">The corresponding trace for each detected event.</p>
</dd>
<dt>trigtypes: ndarray</dt>
<dd><p class="first last">Array of boolean vectors each of length 3. The first value indicates if the trace is a random or not.
The second value indicates if we had a pulse trigger. The third value indicates if we had a ttl trigger.</p>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tescal.trigger.cont_trigger.rand_sections">
<code class="descclassname">tescal.trigger.cont_trigger.</code><code class="descname">rand_sections</code><span class="sig-paren">(</span><em>x</em>, <em>n</em>, <em>l</em>, <em>t=None</em>, <em>fs=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#tescal.trigger.cont_trigger.rand_sections" title="Permalink to this definition">¶</a></dt>
<dd><p>Return random, non-overlapping sections of a 1 or 2 dimensional array.
For 2-dimensional arrays, the function treats each row as independent from the other rows.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x</strong> : ndarray</p>
<blockquote>
<div><blockquote>
<div><p>n dimensional array to choose sections from</p>
</div></blockquote>
<dl class="docutils">
<dt>n <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of sections to choose</p>
</dd>
<dt>l <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Length in bins of sections</p>
</dd>
<dt>t <span class="classifier-delimiter">:</span> <span class="classifier">array_like or float, optional</span></dt>
<dd><p class="first last">Start times (in s) associated with x</p>
</dd>
<dt>fs <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Sample rate of data (in Hz)</p>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>evttimes</strong> : ndarray</p>
<blockquote class="last">
<div><blockquote>
<div><p>Array of the corresponding event times for each section</p>
</div></blockquote>
<dl class="docutils">
<dt>res <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Array of the n sections of x, each with length l</p>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tescal.trigger.cont_trigger.rand_sections_wrapper">
<code class="descclassname">tescal.trigger.cont_trigger.</code><code class="descname">rand_sections_wrapper</code><span class="sig-paren">(</span><em>filelist</em>, <em>n</em>, <em>l</em>, <em>datashape=None</em>, <em>iotype='stanford'</em><span class="sig-paren">)</span><a class="headerlink" href="#tescal.trigger.cont_trigger.rand_sections_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for the rand_sections function for getting random sections from many different files. This allows 
the user to input a list of files that the random sections should be pulled from.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>filelist</strong> : list of strings</p>
<blockquote>
<div><blockquote>
<div><p>List of files to be opened to take random sections from (should be full paths)</p>
</div></blockquote>
<dl class="docutils">
<dt>n <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of sections to choose</p>
</dd>
<dt>l <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Length in bins of sections</p>
</dd>
<dt>datashape <span class="classifier-delimiter">:</span> <span class="classifier">tuple, NoneType, optional</span></dt>
<dd><p class="first last">The shape of the data in each file. If inputted, this should be a tuple that is 
(# of traces in a dataset, # of bins in each trace). If left as None, then the first file in filelist
is opened, and the shape of the data in it is used.</p>
</dd>
<dt>iotype <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Type of file to open, uses a different IO function. Default is “stanford”.</dt>
<dd><p class="first last">“stanford” : Use pycdms.io.loadstanfordfile to open the files</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>evttimes</strong> : ndarray</p>
<blockquote class="last">
<div><blockquote>
<div><p>Array of the corresponding event times for each section</p>
</div></blockquote>
<dl class="docutils">
<dt>res <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Array of the n sections of x, each with length l</p>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-tescal.trigger">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-tescal.trigger" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tescal.utils.html" class="btn btn-neutral float-right" title="tescal.utils package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tescal.plotting.html" class="btn btn-neutral" title="tescal.plotting package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Caleb Fink, Sam Watkins.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.2.2',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>